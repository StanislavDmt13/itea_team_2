{% extends "base.html" %}

{% load static %}

{% block content %}
<div class="container text-center">
    <img class="rounded" style="margin:15px; padding-top:42px" src="{% static 'img/banner_2.png' %}" width="1090px" />
</div>

<!-- Users list -->
<div class="container d-flex justify-content-center">

    
    <div id="users_row" class="row ">
       
    </div>
    
</div>
<!-- Users list end -->

<div class="container text-center">
    <div class="row text-center " style="margin:15px">
        <div class="col-1"></div>
        <div class="col-1 border-bottom text-center">
            <img src="{% static 'img/user3.png' %}" class="rounded-circle" alt="..." width="80px" heigth="60px">
            <p><a href="#" class="link-secondary">runner1</a> <br><small class="muted" style="font-size:9px;">19-Aug-2021 18-00</small></p>
        </div>
        <div class="col-9 border-bottom">
            <p class="lead">The phrase "Lorem ipsum dolor sit amet consectetuer" appears in Microsoft Word online Help. This phrase has the appearance of an intelligent Latin idiom. Actually, it is nonsense.</p>
            <p style="text-align:left">Although the phrase is nonsense, it does have a long history. The phrase has been used for several centuries by typographers to show the most distinctive features of their fonts. It is used because the letters involved and the letter spacing in those combinations reveal, at their best, the weight, design, and other important features of the typeface.</p>
        </div>
    </div>

    <div class="row text-center " style="margin:15px">
        <div class="col-1"></div>
        <div class="col-1 border-bottom">
            <img src="{% static 'img/user4.png' %}" class="rounded-circle" alt="..." width="60">
            <p>smiley1969 <br><small class="muted" style="font-size:9px;">19-Aug-2021 18-00</small></p>
        </div>
        <div class="col-9 border-bottom">
            <p class="lead">The phrase "Lorem ipsum dolor sit amet consectetuer" appears in Microsoft Word online Help. This phrase has the appearance of an intelligent Latin idiom. Actually, it is nonsense.</p>
            <p style="text-align:left">Although the phrase is nonsense, it does have a long history. The phrase has been used for several centuries by typographers to show the most distinctive features of their fonts. It is used because the letters involved and the letter spacing in those combinations reveal, at their best, the weight, design, and other important features of the typeface.</p>
        </div>
    </div>

    <div class="row text-center" style="margin:15px">
        <div class="col-1"></div>
        <div class="col-1 border-bottom">
            <img src="{% static 'img/user_pic_big.png' %}" class="rounded-circle" alt="..." width="80px" heigth="60px">
            <p>handy2020 <br><small class="muted" style="font-size:9px;">19-Aug-2021 18-00</small></p>
        </div>
        <div class="col-9 border-bottom">
            <p class="lead">The phrase "Lorem ipsum dolor sit amet consectetuer" appears in Microsoft Word online Help. This phrase has the appearance of an intelligent Latin idiom. Actually, it is nonsense.</p>
            <p style="text-align:left">Although the phrase is nonsense, it does have a long history. The phrase has been used for several centuries by typographers to show the most distinctive features of their fonts. It is used because the letters involved and the letter spacing in those combinations reveal, at their best, the weight, design, and other important features of the typeface.</p>
        </div>
    </div>

    <div class="row text-center" style="margin:15px">
        <div class="col-1"></div>
        <div class="col-1 border-bottom" style="padding-top:15px;">
            <img src="{% static 'img/user4.png' %}" class="rounded-circle" alt="..." width="60">
            <p>smiley1969 <br><small class="muted" style="font-size:9px;">19-Aug-2021 18-00</small></p>
        </div>
        <div class="col-9 border-bottom">
            <p class="lead">The phrase "Lorem ipsum dolor sit amet consectetuer" appears in Microsoft Word online Help. This phrase has the appearance of an intelligent Latin idiom. Actually, it is nonsense.</p>
            <p style="text-align:left">Although the phrase is nonsense, it does have a long history. The phrase has been used for several centuries by typographers to show the most distinctive features of their fonts. It is used because the letters involved and the letter spacing in those combinations reveal, at their best, the weight, design, and other important features of the typeface.</p>
        </div>
    </div>
</div>


<script>
    function addUserHTML(user) {
        console.log(user);
        old_html = $('#users_row').html();

        img = user.photo;
        if(user.photo == null) {
            img = '{% static 'img/generic_user_pic.png' %}';
        }

        bio_text = user.short_bio
        if(bio_text ==null || bio_text.length == 0) 
            bio_text = "No bio provided"

        usr_div_html = '<div class="col-2">'+
                            '<div class="card" style="width:160px;">'+
                                '<img src="'+img+'" class="card-img-top" alt="..." height="138">'+
                                '<h6 class="card-title">'+user.username.slice(0, 14)+'</h6>'+
                                '<div class="card-body">'+
                                    '<p class="card-text"><small>'+
                                        bio_text.slice(0, 50)+'</small></p>'+
                                '</div>'+
                            '</div>'+
                        '</div>';

        $('#users_row').html(old_html+usr_div_html);
    }//function addUserHTML(user) {


    function loadAndShowUsers() {
        requestURL = "{% url 'home_page_rnd_users' %}"
        console.log("HomePageUserGeneration")
        $.ajax({
            type: "GET",
            url: requestURL,
            data : {
                csrfmiddlewaretoken : readCookie('csrftoken'),
            },
            success : function(data) {
                console.log("Have users:")
                console.log(data)
                for(user in data) {
                    addUserHTML(data[user]);
                    // break;
                }
                // $("#old-comments-row").html("")
                // for(comment in data) {
                //     console.log(data[comment])
                //     addCommentHTML(
                //         parent_id = "old-comments-row", 
                //         comment_text = data[comment].comment_text,
                //         usr_photo_url = data[comment].author.photo,
                //         comment_date = (new Date(data[comment].date_created)).toLocaleDateString(
                //                             'en-us', 
                //                             {   weekday:"long", 
                //                                 year:"numeric", 
                //                                 month:"short", 
                //                                 day:"numeric"}
                //                         ) //comment_date = 
                //     )
                // }
            }//success : function(data) {
        });//$.ajax({
    }//function loadAndShowUsers() {

    executeOnLoad(loadAndShowUsers)


</script>

{% endblock %}